//========================================================================
// Display-test-cases
//========================================================================
// This file is meant to be included in a test bench.

//------------------------------------------------------------------------
// check
//------------------------------------------------------------------------
// We set the inputs, wait 8 tau, check the outputs, wait 2 tau. Each
// check will take a total of 10 tau.

task check
(
  input logic [4:0] in_,
  input logic [6:0] seg_tens_,
  input logic [6:0] seg_ones_
);
  if ( !t.failed ) begin
    t.num_checks += 1;

    in = in_;

    #8;

    if ( t.n != 0 )
      $display( "%3d: %b (%d) > %b %b", t.cycles,
                in, in, seg_tens, seg_ones );

    `ECE2300_CHECK_EQ( seg_tens, seg_tens_ );
    `ECE2300_CHECK_EQ( seg_ones, seg_ones_ );

    #2;

  end
endtask

//------------------------------------------------------------------------
// test_case_1_basic
//------------------------------------------------------------------------

task test_case_1_basic();
  t.test_case_begin( "test_case_1_basic" );

  check( 5'b00000, 7'b100_0000, 7'b100_0000 );
  check( 5'b00001, 7'b100_0000, 7'b111_1001 );

  t.test_case_end();
endtask

//------------------------------------------------------------------------
// test_case_2_exhaustive
//------------------------------------------------------------------------

task test_case_2_exhaustive();
  t.test_case_begin( "test_case_2_exhaustive" );

  // 0 to 9
  //       in        tens         ones
  check( 5'b00000, 7'b100_0000, 7'b100_0000); // 0
  check( 5'b00001, 7'b100_0000, 7'b111_1001); // 1
  check( 5'b00010, 7'b100_0000, 7'b010_0100); // 2
  check( 5'b00011, 7'b100_0000, 7'b011_0000); // 3
  check( 5'b00100, 7'b100_0000, 7'b001_1001); // 4
  check( 5'b00101, 7'b100_0000, 7'b001_0010); // 5
  check( 5'b00110, 7'b100_0000, 7'b000_0010); // 6
  check( 5'b00111, 7'b100_0000, 7'b111_1000); // 7
  check( 5'b01000, 7'b100_0000, 7'b000_0000); // 8
  check( 5'b01001, 7'b100_0000, 7'b001_1000); // 9

  // 10 to 19
  //       in        tens         ones
  check( 5'b01010, 7'b111_1001, 7'b100_0000); // 10
  check( 5'b01011, 7'b111_1001, 7'b111_1001); // 11
  check( 5'b01100, 7'b111_1001, 7'b010_0100); // 12
  check( 5'b01101, 7'b111_1001, 7'b011_0000); // 13
  check( 5'b01110, 7'b111_1001, 7'b001_1001); // 14
  check( 5'b01111, 7'b111_1001, 7'b001_0010); // 15
  check( 5'b10000, 7'b111_1001, 7'b000_0010); // 16
  check( 5'b10001, 7'b111_1001, 7'b111_1000); // 17
  check( 5'b10010, 7'b111_1001, 7'b000_0000); // 18
  check( 5'b10011, 7'b111_1001, 7'b001_1000); // 19

  // 20 to 29
  //       in        tens         ones
  check( 5'b10100, 7'b010_0100, 7'b100_0000); // 20
  check( 5'b10101, 7'b010_0100, 7'b111_1001); // 21
  check( 5'b10110, 7'b010_0100, 7'b010_0100); // 22
  check( 5'b10111, 7'b010_0100, 7'b011_0000); // 23
  check( 5'b11000, 7'b010_0100, 7'b001_1001); // 24
  check( 5'b11001, 7'b010_0100, 7'b001_0010); // 25
  check( 5'b11010, 7'b010_0100, 7'b000_0010); // 26
  check( 5'b11011, 7'b010_0100, 7'b111_1000); // 27
  check( 5'b11100, 7'b010_0100, 7'b000_0000); // 28
  check( 5'b11101, 7'b010_0100, 7'b001_1000); // 29

  // 30 to 31
  //       in        tens         ones
  check( 5'b11110, 7'b011_0000, 7'b100_0000);  // 30
  check( 5'b11111, 7'b011_0000, 7'b111_1001);  // 31

  t.test_case_end();
endtask

//------------------------------------------------------------------------
// main
//------------------------------------------------------------------------

initial begin
  t.test_bench_begin();

  if ((t.n <= 0) || (t.n == 1)) test_case_1_basic();
  if ((t.n <= 0) || (t.n == 2)) test_case_2_exhaustive();

  t.test_bench_end();
end
